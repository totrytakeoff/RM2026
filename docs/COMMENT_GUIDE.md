# 注释规范指南

在 RM2026 项目中，注释不仅用于说明代码含义，还承担着记录接口、编译配置与脚本用途的职责。本指南约束不同语言的文件头注释与行内注释风格，确保整个仓库的一致可读性。

## 总体原则

- **及时**：新增模块或脚本时，第一段注释必须说明目的、作者与修改时间。
- **精准**：描述行为、参数、限制或副作用，避免写“这是一个函数”这类无意义句子。
- **更新**：逻辑改动时需同步更新注释，避免陈旧描述误导他人。
- **语言**：统一使用中文说明，可穿插必要的英文技术词汇。

## 文件头模板

### C/C++/ASM 源文件

使用 Doxygen 块注释，并以 * 填充边框：

```c
/***************************************************************************//**
 * @file      path/to/file.c
 * @brief     描述模块用途
 * @project   RM2026
 * @author    your_name
 * @version   1.0.0
 * @date      2025-12-07
 * @details   需要时补充具体行为、依赖或使用方式。
 ******************************************************************************/
```

> 若文件自带第三方版权头，可在其后追加项目自定义块注释。

### CMake/CMakeLists 与 Shell/PowerShell 脚本

只能使用 `#` 注释，约定以下格式：

```cmake
# =============================================================================
# @file path/to/file.cmake
# @brief 描述文件作用
# @project RM2026
# @author your_name
# @version 1.0.0
# @date 2025-12-07
# @details 需要时补充细节
# =============================================================================
```

脚本文件需将注释放在 shebang (`#!/bin/bash`) 之后。

## 行内与块注释

- **C/C++/ASM**：首选 `/* ... */` 块注释或 `//` 单行注释，用于解释复杂流程、魔法常量或寄存器配置。
- **CMake/脚本**：使用 `#` 单行注释，可在多行前重复 `#`。
- **多行注释**：优先拆成多行单行注释或块注释，避免超长行。

## Doxygen 标签推荐

| 场景      | 常用标签                                                     |
| --------- | ------------------------------------------------------------ |
| 函数/接口 | `@brief`, `@param`, `@return`, `@note`, `@warning` |
| 数据结构  | `@struct`, `@enum`, `@var`, `@field`                 |
| 脚本说明  | `@brief`, `@details`, `@usage`（可自定义文本说明）     |

## 常见反例

- 仅重复函数/变量名称，如 `// init()`。
- 与代码不一致，比如注释写“返回 0”而函数实际返回错误码。
- 在无关紧要的赋值或 getter/setter 上写注释。

## 提交流程提示

1. 新增文件 → 立即添加文件头注释。
2. 修改行为 → 检查相关注释是否需要同步调整。
3. 审查他人代码时，如发现注释缺失或风格不一致，需在 Review 中指出。

遵循以上约定可以显著降低沟通成本，欢迎在实际开发中继续完善本指南。

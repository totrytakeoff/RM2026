# =============================================================================
# RoboMaster 嵌入式框架 - motor_test CMakeLists.txt
# =============================================================================
# 项目: motor_test
# 描述: 电机测试项目
# 作者: YZ-Control/myself
# 版本: 1.0.0
# 日期: 2025-12-07
# =============================================================================

# =============================================================================
# 项目信息
# =============================================================================
# 定义项目名称
project(motor_test)

# =============================================================================
# 包含通用CMake函数
# =============================================================================
include(${CMAKE_SOURCE_DIR}/cmake/Functions.cmake)

# =============================================================================
# 头文件包含路径
# =============================================================================
# 包含必要的头文件目录
include_directories(${CMAKE_CURRENT_SOURCE_DIR})
# RM2026_Framework 已经包含了以下路径:
# ${CMAKE_SOURCE_DIR}/Inc
# ${CMAKE_SOURCE_DIR}/lib/HNUYueLuRM/Drivers/STM32F4xx_HAL_Driver/Inc
# ${CMAKE_SOURCE_DIR}/lib/HNUYueLuRM/Drivers/CMSIS/Include
# 等等

# 注意：通用头文件路径已在根CMakeLists.txt中设置

# =============================================================================
# 源文件配置
# =============================================================================
# 收集测试源文件
file(GLOB TEST_SOURCES
    "*.cpp"
    "*.c"
)

# 收集必要的源文件
file(GLOB REQUIRED_SOURCES
    ${COMMON_SOURCES}
)

# =============================================================================
# 测试项目构建
# =============================================================================
# 使用父目录定义的通用函数创建测试项目
create_test_project(${PROJECT_NAME} "${TEST_SOURCES}" "${REQUIRED_SOURCES}" RM2026_Framework)

# =============================================================================
# 使用说明
# =============================================================================
# 构建测试:
#   make test_motor_test
#
# 下载测试程序:
#   make download-motor_test-dap    # 使用DAP下载
#   make download-motor_test-jlink  # 使用JLink下载
#
# 一键编译并烧录测试:
#   make build-and-flash-motor_test
# =============================================================================
